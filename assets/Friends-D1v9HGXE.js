import{b as v,c as o,W as g,cF as p,j as e,cG as j,b4 as R,b5 as F,f as q,cH as b,b1 as S,cI as N,az as U,b3 as C,b2 as T,r as y,bf as A}from"./index-C3Mgf05E.js";import{F as f}from"./FriendCard-C8PPmW9H.js";import{c as L}from"./sweetAlert-CYyJlmlj.js";const Y=()=>{const d=v(),r=o(n=>g(n,n.profile.id)),i=o(n=>p(n,r?.id||""));if(!r)return e.jsx("div",{children:"User not found"});const u=n=>{d(F({senderId:n,receiverId:r.id}))},a=n=>{d(R({senderId:n,receiverId:r.id}))},t=i.map(n=>{const s=j(n);if(!s)return null;const m=s.educationLevel==="UNIVERSITY"?s.university?.name:s.college?.name;return{id:s.id,name:s.name,avatar:s.avatar,university:m||"Unknown Institution"}}).filter(n=>n!==null);return e.jsx("div",{children:t.length===0?e.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white p-8 text-center shadow-sm",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"No friend requests"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"You don't have any pending friend requests."})]}):e.jsx("div",{className:"space-y-3",children:t.map(n=>e.jsx(f,{id:n.id,name:n.name,avatar:n.avatar,university:n.university,type:"request",onAccept:u,onDecline:a},n.id))})})},k=({searchQuery:d,onSearchChange:r})=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Friends"}),e.jsxs("div",{className:"relative",children:[e.jsx(q,{className:"absolute top-1/2 left-3 -translate-y-1/2 transform text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search friends...",value:d,onChange:i=>r(i.target.value),className:"w-64 rounded-lg border border-gray-300 py-2 pr-4 pl-10 focus:border-blue-500 focus:ring-1 focus:ring-blue-500 focus:outline-none"})]})]}),I=()=>{const d=v(),r=o(t=>g(t,t.profile.id)),i=o(t=>b(t,r?.id||""));if(!r)return e.jsx("div",{children:"User not found"});const u=async t=>{await L({title:"Are you sure?",text:"You will remove this friend.",confirmButtonText:"Yes, unfriend",icon:"warning"})&&d(S({user1Id:r.id,user2Id:t}))},a=i.map(t=>{const n=j(t);if(!n)return null;const s=n.educationLevel==="UNIVERSITY"?n.university?.name:n.college?.name;return{id:n.id,name:n.name,avatar:n.avatar,university:s||"Unknown Institution"}}).filter(t=>t!==null);return a.length===0?e.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white p-8 text-center shadow-sm",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"No friends yet"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"You don't have any friends added. Add some friends to connect with them."})]}):e.jsx("div",{className:"space-y-3",children:a.map(t=>e.jsx(f,{id:t.id,name:t.name,avatar:t.avatar,university:t.university,type:"friend",onUnfriend:u},t.id))})},E=({activeTab:d,onTabChange:r})=>{const i=a=>{r(a)},u=[{id:"all",label:"All Friends"},{id:"requests",label:"Friend Requests"},{id:"suggestions",label:"Suggestions"},{id:"sent",label:"Sent Requests"}];return e.jsx("div",{className:"flex space-x-1 rounded-lg bg-gray-100",children:u.map(a=>e.jsx("button",{onClick:()=>i(a.id),className:`flex-1 rounded-md px-4 py-2 text-sm font-medium transition-colors ${d===a.id?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:a.label},a.id))})},B=()=>{const d=v(),r=o(s=>g(s,s.profile.id)),i=o(s=>b(s,r?.id||"")),u=o(s=>p(s,r?.id||"")),a=o(s=>N(s,r?.id||""));if(!r)return e.jsx("div",{children:"User not found"});const t=U.filter(s=>s.id!==r.id&&!i.includes(s.id)&&!u.includes(s.id)&&!a.includes(s.id)).map(s=>{const m=s.educationLevel==="UNIVERSITY"?s.university?.name:s.college?.name;return{id:s.id,name:s.name,avatar:s.avatar,university:m||"Unknown Institution"}}),n=s=>{d(C({senderId:r.id,receiverId:s}))};return e.jsx("div",{className:"space-y-3",children:t.map(s=>e.jsx(f,{id:s.id,name:s.name,avatar:s.avatar,university:s.university,type:"suggestion",onAddFriend:n},s.id))})},D=()=>{const d=v(),r=o(t=>g(t,t.profile.id)),i=o(t=>N(t,r?.id||""));if(!r)return e.jsx("div",{children:"User not found"});const u=t=>{d(T({senderId:r.id,receiverId:t}))},a=i.map(t=>{const n=j(t);if(!n)return null;const s=n.educationLevel==="UNIVERSITY"?n.university?.name:n.college?.name;return{id:n.id,name:n.name,avatar:n.avatar,university:s||"Unknown Institution"}}).filter(t=>t!==null);return e.jsx("div",{className:"space-y-3",children:a.length===0?e.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white p-8 text-center shadow-sm",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"No sent requests"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"You haven't sent any friend requests yet."})]}):a.map(t=>e.jsx(f,{id:t.id,name:t.name,avatar:t.avatar,university:t.university,type:"sent",onCancelRequest:u},t.id))})},z=()=>{const[d,r]=y.useState("all"),[i,u]=y.useState(""),a=A(),t=o(c=>b(c,a)),n=o(c=>p(c,a)),s=o(c=>N(c,a)),m=y.useMemo(()=>{if(!i.trim())return[];const c=i.toLowerCase(),x=U.filter(l=>l.id===a?!1:l.name.toLowerCase().includes(c)||l.username.toLowerCase().includes(c)||(l.university?.name||l.college?.name||"").toLowerCase().includes(c));switch(d){case"all":return x.filter(l=>t.includes(l.id));case"requests":return x.filter(l=>n.includes(l.id));case"suggestions":return x.filter(l=>!t.includes(l.id)&&!n.includes(l.id)&&!s.includes(l.id));case"sent":return x.filter(l=>s.includes(l.id));default:return x}},[i,d,a,t,n,s]),h=()=>m.length===0?e.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white p-8 text-center shadow-sm",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"No results found"}),e.jsxs("p",{className:"mt-2 text-gray-600",children:['No users found for "',i,'"']})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900",children:["Search Results (",m.length,")"]}),e.jsx("div",{className:"grid gap-3",children:m.map(c=>e.jsx(f,{id:c.id,name:c.name,avatar:c.avatar,university:c.university?.name||c.college?.name||"No University",type:d==="all"?"friend":d==="requests"?"request":d==="sent"?"search":"suggestion"},c.id))})]}),w=()=>{switch(d){case"all":return i.trim()?h():e.jsx(I,{});case"requests":return i.trim()?h():e.jsx(Y,{});case"suggestions":return i.trim()?h():e.jsx(B,{});case"sent":return i.trim()?h():e.jsx(D,{});default:return i.trim()?h():e.jsx(I,{})}};return e.jsxs(e.Fragment,{children:[e.jsx(k,{searchQuery:i,onSearchChange:u}),e.jsx(E,{activeTab:d,onTabChange:r}),w()]})};export{z as default};
